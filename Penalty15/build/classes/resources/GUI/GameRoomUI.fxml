<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.*?>
<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>
<?import javafx.scene.shape.*?>

<BorderPane xmlns="http://javafx.com/javafx/21" xmlns:fx="http://javafx.com/fxml/1"
            fx:controller="client.GUI.GameRoomController"
            style="-fx-background-color: #e0f2fe;">

    <!-- TOP HEADER -->
    <top>
        <VBox style="-fx-background-color: #0284c7; 
                     -fx-padding: 12 18; 
                     -fx-spacing: 10;
                     -fx-effect: dropshadow(gaussian, rgba(0,0,0,0.3), 10, 0, 0, 3);">
            
            <Label text="âš½ PENALTY SHOOTOUT - ONLINE MATCH" 
                   style="-fx-font-size: 17px; 
                          -fx-font-weight: bold; 
                          -fx-text-fill: white; 
                          -fx-alignment: center;
                          -fx-effect: dropshadow(gaussian, rgba(0,0,0,0.3), 4, 0, 0, 2);"/>
            
            <!-- Player Names -->
            <HBox spacing="20" style="-fx-alignment: center; -fx-padding: 4 15;">
                <Label fx:id="playerNameLabel" 
                       text="ðŸ‘¤ Báº¡n" 
                       style="-fx-font-size: 13px; 
                              -fx-font-weight: bold; 
                              -fx-text-fill: white; 
                              -fx-background-color: rgba(255, 255, 255, 0.15);
                              -fx-padding: 6 15;
                              -fx-background-radius: 8;"/>
                <Label text="VS" 
                       style="-fx-font-size: 13px; 
                              -fx-font-weight: bold; 
                              -fx-text-fill: #fbbf24;"/>
                <Label fx:id="opponentNameLabel" 
                       text="ðŸ‘¤ Äá»‘i thá»§" 
                       style="-fx-font-size: 13px; 
                              -fx-font-weight: bold; 
                              -fx-text-fill: white; 
                              -fx-background-color: rgba(255, 255, 255, 0.15);
                              -fx-padding: 6 15;
                              -fx-background-radius: 8;"/>
            </HBox>
            
            <!-- Score and Timer - Gaming Style -->
            <HBox spacing="25" style="-fx-alignment: center; -fx-padding: 6 15;">
                <VBox spacing="3" style="-fx-alignment: center; -fx-padding: 8; -fx-background-color: rgba(255, 255, 255, 0.9); -fx-background-radius: 12; -fx-border-radius: 12; -fx-min-width: 120;">
                    <Label text="ðŸ“Š Tá»¶ Sá»" 
                           style="-fx-font-size: 10px; -fx-font-weight: bold; -fx-text-fill: #0284c7;"/>
                    <Label fx:id="scoreLabel" 
                           text="0 - 0" 
                           style="-fx-font-size: 30px; -fx-font-weight: bold; -fx-text-fill: #f59e0b;
                                  -fx-effect: dropshadow(gaussian, rgba(245, 158, 11, 0.35), 5, 0, 0, 2);"/>
                </VBox>
                
                <Separator orientation="VERTICAL" prefHeight="50" style="-fx-background-color: rgba(255, 255, 255, 0.5); -fx-padding: 0 2;"/>
                
                <VBox spacing="3" style="-fx-alignment: center; -fx-padding: 8; -fx-background-color: rgba(255, 255, 255, 0.9); -fx-background-radius: 12; -fx-border-radius: 12; -fx-min-width: 120;">
                    <Label text="ðŸ”¢ VÃ’NG Äáº¤U" 
                           style="-fx-font-size: 10px; -fx-font-weight: bold; -fx-text-fill: #0284c7;"/>
                    <Label fx:id="roundLabel" 
                           text="VÃ²ng 1/10" 
                           style="-fx-font-size: 22px; -fx-font-weight: bold; -fx-text-fill: #16a34a;
                                  -fx-effect: dropshadow(gaussian, rgba(22, 163, 74, 0.35), 5, 0, 0, 2);"/>
                </VBox>
                
                <Separator orientation="VERTICAL" prefHeight="50" style="-fx-background-color: rgba(255, 255, 255, 0.5); -fx-padding: 0 2;"/>
                
                <VBox spacing="3" style="-fx-alignment: center; -fx-padding: 8; -fx-background-color: rgba(255, 255, 255, 0.9); -fx-background-radius: 12; -fx-border-radius: 12; -fx-min-width: 120;">
                    <Label text="â±ï¸ THá»œI GIAN" 
                           style="-fx-font-size: 10px; -fx-font-weight: bold; -fx-text-fill: #0284c7;"/>
                    <Label fx:id="timerLabel" 
                           text="15" 
                           style="-fx-font-size: 30px; -fx-font-weight: bold; -fx-text-fill: #1e293b;
                                  -fx-effect: dropshadow(gaussian, rgba(30, 41, 59, 0.25), 5, 0, 0, 2);"/>
                </VBox>
            </HBox>
        </VBox>
    </top>

    <!-- CENTER: GAME FIELD & CHAT -->
    <center>
        <HBox spacing="20" style="-fx-padding: 20; -fx-alignment: center;" HBox.hgrow="ALWAYS">
            
            <!-- LEFT: GAME FIELD -->
            <VBox spacing="12" 
                  style="-fx-alignment: center; 
                         -fx-padding: 15;
                         -fx-background-color: white;
                         -fx-border-radius: 15;
                         -fx-background-radius: 15;
                         -fx-border-color: #e2e8f0;
                         -fx-border-width: 2;
                         -fx-effect: dropshadow(gaussian, rgba(0,0,0,0.12), 12, 0, 0, 4);"
                  HBox.hgrow="ALWAYS" 
                  VBox.vgrow="ALWAYS"
                  minWidth="450" 
                  prefWidth="700">
                    
                    <!-- Instruction Label -->
                    <Label fx:id="instructionLabel"
                           text="ðŸ‘‰ Chá»n cháº¿ Ä‘á»™ SÃšT BÃ“NG hoáº·c CHáº¶N BÃ“NG" 
                           style="-fx-font-size: 11px; 
                                  -fx-font-weight: bold; 
                                  -fx-text-fill: #0ea5e9;
                                  -fx-alignment: center;
                                  -fx-padding: 6;
                                  -fx-background-color: #f0f9ff;
                                  -fx-background-radius: 8;
                                  -fx-border-radius: 8;
                                  -fx-border-color: #0ea5e9;
                                  -fx-border-width: 1.5;
                                  -fx-wrap-text: true;"/>
                    
                    <!-- GAME PANE WITH ZONES -->
                    <StackPane VBox.vgrow="ALWAYS" 
                              minWidth="450" minHeight="400" 
                              prefWidth="650" prefHeight="550" 
                              style="-fx-alignment: center;">
                        <!-- Background Field - Drawn by Java -->
                        <Pane fx:id="gamePane" 
                              style="-fx-background-color: #16a34a; 
                                     -fx-border-color: white; 
                                     -fx-border-width: 4; 
                                     -fx-border-radius: 12;
                                     -fx-background-radius: 12;
                                     -fx-effect: dropshadow(gaussian, rgba(0,0,0,0.18), 6, 0, 0, 2);"
                              minWidth="450"
                              minHeight="400"
                              prefWidth="650" 
                              prefHeight="550"/>
                        
                                          <!-- Interactive zones removed: using absolute overlays drawn on gamePane -->
                    </StackPane>
                </VBox>

            <!-- RIGHT PANEL: Controls & Chat -->
            <VBox spacing="12" 
                  style="-fx-padding: 15;
                         -fx-background-color: white;
                         -fx-border-radius: 15;
                         -fx-background-radius: 15;
                         -fx-border-color: #e2e8f0;
                         -fx-border-width: 2;
                         -fx-effect: dropshadow(gaussian, rgba(0,0,0,0.12), 12, 0, 0, 4);"
                  minWidth="280" 
                  prefWidth="350" 
                  HBox.hgrow="SOMETIMES"
                  VBox.vgrow="ALWAYS">
                
                <!-- MODE SELECTION -->
                <VBox spacing="8" style="-fx-padding: 10; -fx-background-color: #f0f9ff; -fx-background-radius: 12; -fx-border-radius: 12; -fx-border-color: #0ea5e9; -fx-border-width: 1.5;">
                    <Label text="ðŸŽ¯ CHá»ŒN CHáº¾ Äá»˜ CHÆ I" 
                           style="-fx-font-size: 12px; 
                                  -fx-font-weight: bold; 
                                  -fx-text-fill: #0284c7;
                                  -fx-wrap-text: true;"/>
                    
                    <ToggleButton fx:id="shootModeButton"
                                 text="ðŸŽ¯ SÃšT BÃ“NG"
                                 onAction="#handleShootMode"
                                 prefHeight="38"
                                 maxWidth="Infinity"
                                 style="-fx-font-size: 12px; 
                                        -fx-font-weight: bold;">
                        <cursor><javafx.scene.Cursor fx:constant="HAND" /></cursor>
                    </ToggleButton>
                    
                    <ToggleButton fx:id="goalkeeperModeButton"
                                 text="ðŸ›¡ï¸ CHáº¶N BÃ“NG"
                                 onAction="#handleGoalkeeperMode"
                                 prefHeight="38"
                                 maxWidth="Infinity"
                                 style="-fx-font-size: 12px; 
                                        -fx-font-weight: bold;">
                        <cursor><javafx.scene.Cursor fx:constant="HAND" /></cursor>
                    </ToggleButton>
                </VBox>
                
                <!-- CHAT SECTION -->
                <VBox spacing="6" VBox.vgrow="ALWAYS">
                    <Label text="ðŸ’¬ CHAT" 
                           style="-fx-font-size: 12px; 
                                  -fx-font-weight: bold; 
                                  -fx-text-fill: #0284c7;"/>
                    
                    <TextArea fx:id="chatArea" 
                             editable="false" 
                             wrapText="true" 
                             prefRowCount="12"
                             minHeight="200"
                             prefHeight="350"
                             style="-fx-font-size: 12px; 
                                    -fx-padding: 10;
                                    -fx-control-inner-background: #f8fafc;
                                    -fx-text-fill: #1e293b;"
                             VBox.vgrow="ALWAYS"/>
                    
                    <HBox spacing="6">
                        <TextField fx:id="chatInput" 
                                  promptText="Nháº­p tin nháº¯n..." 
                                  style="-fx-font-size: 11px;
                                         -fx-padding: 6;"
                                 HBox.hgrow="ALWAYS"/>
                        
                        <Button text="ðŸ“¤" 
                               onAction="#handleSendChat" 
                               prefWidth="40"
                               prefHeight="32"
                               style="-fx-font-size: 14px;
                                      -fx-background-color: #0ea5e9;
                                      -fx-text-fill: white;
                                      -fx-border-radius: 16;
                                      -fx-background-radius: 16;">
                            <cursor><javafx.scene.Cursor fx:constant="HAND" /></cursor>
                        </Button>
                    </HBox>
                </VBox>

                <!-- ACTION BUTTONS -->
                <VBox spacing="8">
                    <Separator style="-fx-background-color: #cbd5e1; -fx-padding: 1 0;"/>
                    
                    <Button fx:id="quitButton" 
                           text="âŒ THOÃT PHÃ’NG" 
                           onAction="#handleQuitGame"
                           prefHeight="36"
                           maxWidth="Infinity"
                           style="-fx-font-size: 12px; 
                                  -fx-font-weight: bold; 
                                  -fx-background-color: #ef4444;
                                  -fx-text-fill: white;
                                  -fx-border-radius: 10;
                                  -fx-background-radius: 10;">
                        <cursor><javafx.scene.Cursor fx:constant="HAND" /></cursor>
                    </Button>
                </VBox>
            </VBox>
        </HBox>
    </center>

</BorderPane>